<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>K.I.N.D.S. Workbench</title>
    <style>
        body { background: #0e0e0e; color: #e0e0e0; margin: 0; font-family: sans-serif; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        
        /* [A] MAGNETS - TOP ANCHOR */
        #Area_A { width: 100%; height: 50px; background: #1a1a1a; display: flex; justify-content: space-around; align-items: center; border-bottom: 2px solid #39ff14; z-index: 10; }
        .mag-btn { background: #222; color: #39ff14; border: 1px solid #39ff14; padding: 5px 10px; border-radius: 4px; font-size: 11px; font-weight: bold; }

        /* THE CANVAS AREA */
        #Workspace { flex-grow: 1; display: flex; justify-content: center; align-items: center; position: relative; background: #222; }
        #Main_Canvas { width: 80vw; height: 55vh; background: #fff; box-shadow: 0 0 30px #000; transition: transform 0.1s linear, border-radius 0.3s; position: relative; }
        
        /* [E] UNDER-LAYER TEXTURE (Cheddar-Getter) */
        #Grit_Layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; opacity: 0.1; }

        /* THE WORKBENCH DRAWERS */
        #Workbench { width: 100%; background: #151515; border-top: 1px solid #333; max-height: 45vh; overflow-y: auto; padding-bottom: 20px; }
        .drawer { display: flex; align-items: center; padding: 12px; border-bottom: 1px solid #222; font-size: 13px; overflow-x: auto; }
        .label { min-width: 90px; color: #888; font-weight: bold; font-size: 10px; }
        .item { background: #333; margin: 0 5px; padding: 8px 12px; border-radius: 4px; cursor: pointer; white-space: nowrap; border: 1px solid #444; }
        .active-tool { border-color: #39ff14; color: #39ff14; }
    </style>
</head>
<body>

    <div id="Area_A">
        <button class="mag-btn" onclick="snap0()">ðŸ§² SNAP 0Â°</button>
        <button id="lockBtn" class="mag-btn" onclick="toggleLock()">ðŸ”’ MAG LOCK: OFF</button>
        <input type="range" min="0" max="360" value="0" oninput="rotateCanvas(this.value)">
    </div>

    <div id="Workspace">
        <div id="Main_Canvas">
            <div id="Grit_Layer"></div>
            </div>
    </div>

    <div id="Workbench">
        <div class="drawer"><span class="label">[B-D] SHELF:</span>
            <div class="item" onclick="setRuler('straight')">Straight Ruler</div>
            <div class="item" onclick="setRuler('compass')">Ovaling Compass</div>
        </div>

        <div class="drawer"><span class="label">[E] LID:</span>
            <div class="item" onclick="setGrit('wood')">Wood Grain</div>
            <div class="item" onclick="setGrit('none')">Smooth Paper</div>
        </div>

        <div class="drawer"><span class="label">[F] TOOLS:</span>
            <div id="tool_H" class="item" onclick="setTool('H')">Lead H (Hard)</div>
            <div id="tool_B" class="item" onclick="setTool('B')">Lead B (Soft)</div>
            <div class="item" onclick="setTool('S')">Shader</div>
        </div>

        <div class="drawer"><span class="label">[G] GRESSION:</span>
            SIZE <input type="range" min="1" max="50" value="5" oninput="updateGression('size', this.value)">
            FRICTION <input type="range" min="1" max="100" value="50" oninput="updateGression('friction', this.value)">
        </div>

        <div class="drawer"><span class="label">[J-K] TOKENS:</span>
            <div class="item">ðŸ¥ƒ Whiskey</div>
            <div class="item">ðŸ§¸ Teddy Bear</div>
        </div>
    </div>

    <script>
        let rotation = 0;
        let isLocked = false;
        let toolConfig = { type: 'H', size: 5, friction: 50 };

        const canvas = document.getElementById('Main_Canvas');

        // [A] Rotation Logic
        function rotateCanvas(val) {
            if (!isLocked) {
                rotation = val;
                canvas.style.transform = `rotate(${rotation}deg)`;
            }
        }
        function snap0() {
            rotation = 0;
            canvas.style.transform = 'rotate(0deg)';
            isLocked = true;
            document.getElementById('lockBtn').innerText = "ðŸ”’ MAG LOCK: ON";
        }
        function toggleLock() {
            isLocked = !isLocked;
            document.getElementById('lockBtn').innerText = isLocked ? "ðŸ”’ MAG LOCK: ON" : "ðŸ”’ MAG LOCK: OFF";
        }

        // [B-D] Ruler Logic
        function setRuler(type) {
            canvas.style.borderRadius = (type === 'compass') ? "50%" : "0px";
            canvas.style.borderLeft = (type === 'straight') ? "4px solid #39ff14" : "none";
        }

        // [E] Grit Logic
        function setGrit(type) {
            const grit = document.getElementById('Grit_Layer');
            grit.style.background = (type === 'wood') ? "repeating-linear-gradient(45deg, #444, #444 2px, transparent 2px, transparent 10px)" : "none";
        }

        // [F-G] Tool & Gression Logic
        function setTool(type) {
            toolConfig.type = type;
            document.querySelectorAll('.item').forEach(el => el.classList.remove('active-tool'));
            event.target.classList.add('active-tool');
        }
        function updateGression(key, val) {
            toolConfig[key] = val;
            console.log("Updated " + key + " to " + val);
        }
    </script>
</body>
</html>
